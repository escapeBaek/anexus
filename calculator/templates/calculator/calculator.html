{% extends 'base.html' %}
{% block page_content %}
<div class="container mt-5">
  <h1 class="text-custom mb-4 text-center" style="font-size: 2.5rem; font-weight: bold">
    Anesthesia Drug Calculator
  </h1>

  <form action="" class="form" id="calcForm">
    <div class="form-row mb-4">
      <div class="form-group col-md-4">
        <label for="age">Age (years)</label>
        <input
          type="number"
          name="age"
          id="age"
          class="form-control"
          value="{{ request.GET.age }}"
        />
      </div>
      <div class="form-group col-md-4">
        <label for="height">Height (cm)</label>
        <input
          type="number"
          name="height"
          id="height"
          class="form-control"
          value="{{ request.GET.height }}"
        />
      </div>
      <div class="form-group col-md-4">
        <label for="weight">Weight (kg)</label>
        <input
          type="number"
          name="weight"
          id="weight"
          class="form-control"
          value="{{ request.GET.weight }}"
        />
      </div>
    </div>

    <div class="row">
      <!-- NEP Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>NEP Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="nep_conc">NEP Concentration (mcg/ml)</label>
              <input
                type="number"
                name="nep_conc"
                id="nep_conc"
                class="form-control"
                value="{{ request.GET.nep_conc|default:20 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="nep_dr">NEP Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="nep_dr"
                id="nep_dr"
                class="form-control"
                value="{{ request.GET.nep_dr|default:0.01 }}"
              />
            </div>
            <p id="nep_result" class="text-custom">NEP c.i.(ml/hr): {{ nep_result }}</p>
          </div>
        </div>
      </div>

      <!-- EPI Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>EPI Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="epi_conc">EPI Concentration (mcg/ml)</label>
              <input
                type="number"
                name="epi_conc"
                id="epi_conc"
                class="form-control"
                value="{{ request.GET.epi_conc|default:20 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="epi_dr">EPI Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="epi_dr"
                id="epi_dr"
                class="form-control"
                value="{{ request.GET.epi_dr|default:0.01 }}"
              />
            </div>
            <p id="epi_result" class="text-custom">EPI c.i.(ml/hr): {{ epi_result }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- DOPA Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>DOPA Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="dopa_conc">DOPA Concentration (mg/ml)</label>
              <input
                type="number"
                name="dopa_conc"
                id="dopa_conc"
                class="form-control"
                value="{{ request.GET.dopa_conc|default:1 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="dopa_dr">DOPA Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="dopa_dr"
                id="dopa_dr"
                class="form-control"
                value="{{ request.GET.dopa_dr|default:5 }}"
              />
            </div>
            <p id="dopa_result" class="text-custom">DOPA c.i.(ml/hr): {{ dopa_result }}</p>
          </div>
        </div>
      </div>

      <!-- DOBU Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>DOBU Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="dobu_conc">DOBU Concentration (mg/ml)</label>
              <input
                type="number"
                name="dobu_conc"
                id="dobu_conc"
                class="form-control"
                value="{{ request.GET.dobu_conc|default:1 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="dobu_dr">DOBU Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="dobu_dr"
                id="dobu_dr"
                class="form-control"
                value="{{ request.GET.dobu_dr|default:5 }}"
              />
            </div>
            <p id="dobu_result" class="text-custom">DOBU c.i.(ml/hr): {{ dobu_result }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- NTG Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>NTG Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="ntg_conc">NTG Concentration (mg/ml)</label>
              <input
                type="number"
                name="ntg_conc"
                id="ntg_conc"
                class="form-control"
                value="{{ request.GET.ntg_conc|default:1 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="ntg_dr">NTG Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="ntg_dr"
                id="ntg_dr"
                class="form-control"
                value="{{ request.GET.ntg_dr|default:0.5 }}"
              />
            </div>
            <p id="ntg_result" class="text-custom">NTG c.i.(ml/hr): {{ ntg_result }}</p>
          </div>
        </div>
      </div>

      <!-- SNP Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>SNP Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="snp_conc">SNP Concentration (mg/ml)</label>
              <input
                type="number"
                name="snp_conc"
                id="snp_conc"
                class="form-control"
                value="{{ request.GET.snp_conc|default:1 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="snp_dr">SNP Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="snp_dr"
                id="snp_dr"
                class="form-control"
                value="{{ request.GET.snp_dr|default:0.5 }}"
              />
            </div>
            <p id="snp_result" class="text-custom">SNP c.i.(ml/hr): {{ snp_result }}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- VASO Calculation Card -->
      <div class="col-md-6 mb-4">
        <div class="card h-100 shadow-lg border-custom">
          <div class="card-body">
            <h5 class="card-title text-custom"><strong>VASO Calculation</strong></h5>
            <div class="form-group mb-3">
              <label for="vaso_conc">VASO Concentration (mg/ml)</label>
              <input
                type="number"
                name="vaso_conc"
                id="vaso_conc"
                class="form-control"
                value="{{ request.GET.vaso_conc|default:1 }}"
              />
            </div>
            <div class="form-group mb-3">
              <label for="vaso_dr">VASO Dose Rate (mcg/kg/min)</label>
              <input
                type="number"
                name="vaso_dr"
                id="vaso_dr"
                class="form-control"
                value="{{ request.GET.vaso_dr|default:0.01 }}"
              />
            </div>
            <p id="vaso_result" class="text-custom">VASO c.i.(ml/hr): {{ vaso_result }}</p>
          </div>
        </div>
      </div>
    </div>

    <button
      type="button"
      class="btn btn-primary btn-lg rounded-pill floating-btn"
      onclick="document.getElementById('calcForm').submit();"
    >
      <i class="fas fa-calculator mr-2"></i> Calculate
    </button>
</div>

<style>
  .floating-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: auto;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1rem;
    text-align: center;
    background-color: #0a4d92; /* Dark blue for button */
    color: #ffffff;
    border: none;
    border-radius: 30px;
  }
  .card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-radius: 0.5rem;
  }
  .card:hover {
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
  }
  .card.border-custom {
    border-color: #0a4d92; /* Dark blue for card border */
  }
  .text-custom {
    color: #0a4d92; /* Deep blue for text */
  }
</style>
{% endblock %}
